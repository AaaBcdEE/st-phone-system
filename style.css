/* === 📱 프리미엄 폰 프레임 디자인 === */
#st-phone-container {
    position: fixed;
    right: 40px;
    bottom: -150%; /* 폰이 커져서 숨기는 위치도 더 깊게 조정 */
    z-index: 20000;
    transition: bottom 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);

    /* ⭐ [수정됨] 크기 대폭 확대 ⭐ */
    width: 400px;        /* 기존 320px -> 400px (훨씬 넓음) */
    height: 850px;       /* 기존 660px -> 850px (훨씬 김) */

    /* 화면이 작은 노트북(13인치 등)에서 짤리지 않게 방지 */
    max-height: 90vh;

    border-radius: 55px; /* 크기에 맞춰 라운드 조금 더 굴림 */

    background-color: #000;
    box-shadow:
        0 0 0 10px #2c2c2c,
        0 0 0 11px #555,
        0 30px 60px rgba(0,0,0,0.6);

    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-sizing: border-box;
    padding: 12px;
}


#st-phone-container.active {
    bottom: 50px;
}

/* 측면 버튼들 (유지) */
#st-phone-container::before {
    content: '';
    position: absolute;
    top: 100px; left: -13px;
    width: 4px; height: 60px;
    background: #333;
    border-radius: 4px 0 0 4px;
}
#st-phone-container::after {
    content: '';
    position: absolute;
    top: 130px; right: -14px;
    width: 4px; height: 80px;
    background: #333;
    border-radius: 0 4px 4px 0;
}

/* === 🖥️ 스크린 영역 === */
.st-phone-screen {
    flex: 1;
    width: 100%;
    height: 100%;
    border-radius: 40px;
    overflow: hidden;
    position: relative;

    /* 배경: 컨텐츠가 잘 보이도록 조금 더 어두운 톤 */
    background: linear-gradient(135deg, #1e1e2f 0%, #2a2a40 100%);
    color: white;
    font-family: -apple-system, sans-serif;

    display: flex;
    flex-direction: column;
}

/* === 🔋 상단바 (깔끔하게 노치만 남김) === */
.st-phone-status-bar {
    height: 40px;
    width: 100%;
    position: relative;
    z-index: 100;
    flex-shrink: 0; /* 스크롤 되어도 줄어들지 않음 */
}

/* 다이내믹 아일랜드 (노치) */
.st-phone-notch {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 28px;
    background: #000;
    border-radius: 20px;
}
/* 카메라 렌즈 */
.st-phone-notch::after {
    content: '';
    position: absolute;
    top: 6px; right: 8px;
    width: 10px; height: 10px;
    background: #1a1a1b;
    border-radius: 50%;
}

/* === 📦 메인 콘텐츠 영역 (여기에 내용을 넣으세요!) === */
#st-phone-content {
    flex: 1;
    width: 100%;
    overflow-y: auto; /* 내용이 길어지면 스크롤 */
    padding: 10px 15px; /* 내부 여백 */
    box-sizing: border-box;

    /* 스크롤바 숨기기 (깔끔함 유지) */
    scrollbar-width: none;
}
#st-phone-content::-webkit-scrollbar {
    display: none;
}

/* 하단 바는 다시 보이게 (display: none 삭제) */

/* 배경화면 반복/잘림 문제 해결 */
.st-phone-screen {
    background-repeat: no-repeat !important; /* 반복 금지 */
    background-size: cover !important;       /* 화면 꽉 채우기 */
    background-position: center !important;
    position: relative; /* 하단 바 위치 잡기 위해 */
}


/* =========================================
   추가 스타일: 테마, 홈 화면, 설정 앱
   ========================================= */

/* 📱 테마 변수 (기본: 라이트 모드) */
#st-phone-container {
    --pt-bg-color: rgba(245, 245, 247, 0.95); /* 앱 배경 */
    --pt-text-color: #000000;                /* 글자 색 */
    --pt-sub-text: #86868b;                  /* 보조 글자 */
    --pt-card-bg: #ffffff;                   /* 입력창/카드 배경 */
    --pt-border: #e5e5e5;                    /* 테두리 색 */
    --pt-accent: #007aff;                    /* 강조 색 (파랑) */
    --pt-font: -apple-system, sans-serif;    /* 기본 폰트 */
}

/* 🌙 다크 모드 (클래스 추가시 자동 변경) */
#st-phone-container.dark-mode {
    --pt-bg-color: rgba(0, 0, 0, 0.8);
    --pt-text-color: #ffffff;
    --pt-sub-text: #98989e;
    --pt-card-bg: #1c1c1e;
    --pt-border: #38383a;
}

/* === 🏠 홈 화면 (앱 그리드) === */
.st-home-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px 10px;
    padding: 20px 10px;
    animation: fadeIn 0.3s ease;
}

/* 앱 아이콘 스타일 */
.st-app-icon {
    width: 65px;
    height: 65px;
    background: #e0e0e0;
    border-radius: 16px;
    margin: 0 auto;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    transition: transform 0.1s;

    display: flex;
    justify-content: center;
    align-items: center;

    font-size: 32px;
    padding-bottom: 5px; /* ⭐ 이거 딱 한 줄 추가해라! (아이콘을 위로 밀어올림) */
}

.st-app-icon:active { transform: scale(0.95); }

/* 설정 앱 아이콘 디자인 (회색 그라데이션 기어) */
.icon-settings {
    background: linear-gradient(135deg, #8e8e93, #636366);
    color: white;
}

/* === ⚙️ 설정 앱 내부 디자인 (iOS 스타일) === */
/* 앱에 들어오면 배경화면 가리기 & 꽉 채우기 */
.st-settings-app {
    padding: 20px;
    color: var(--pt-text-color);
    font-family: var(--pt-font);
    background-color: var(--pt-bg-color); /* 배경색 채우기 */

    /* 화면 꽉 채우기 */
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    overflow-y: auto;
    z-index: 10; /* 배경화면보다 위로 */
    box-sizing: border-box;
}
/* 모든 입력창에서 테두리 강제 제거 및 색상 통일 */
.st-section input,
.st-section select,
.st-section textarea {
    background-color: transparent !important;
    color: var(--pt-text-color) !important;
    /* ⭐ 테두리 색을 다크모드/라이트모드에 맞춰서 회색으로 바꿈 */
    border: 1px solid var(--pt-border) !important;
    border-radius: 6px; /* 모서리 살짝 둥글게 */
    outline: none !important;
}



/* 선택 박스(옵션) 안쪽은 브라우저 기본이므로 색상 지정 */
.st-section select option {
    background-color: var(--pt-bg-color);
    color: var(--pt-text-color);
}
/* 긴 텍스트 입력창 스타일 - 테두리 부활 & 색상 최적화 */
.st-textarea {
    width: 100%;
    /* 배경은 투명하게 해서 뒤에 색을 따라감 */
    background-color: transparent !important;
    /* 글자색은 테마 따라감 */
    color: var(--pt-text-color) !important;
    /* ⭐ 테두리 추가: 너무 하얗지 않게, 테두리 전용 변수 사용 */
    border: 1px solid var(--pt-border) !important;
    border-radius: 8px;
    padding: 10px;
    font-family: inherit;
    resize: none;
    box-sizing: border-box;
    margin-top: 10px;
    outline: none;
}



/* 입력창 포커스(클릭) 했을 때 살짝 강조 */
.st-textarea:focus, .st-input:focus {
    border-color: var(--pt-accent);
}


.st-settings-header {
    font-size: 30px;
    font-weight: 700;
    margin-bottom: 20px;
    padding-left: 5px;
}

/* 설정 그룹 박스 */
.st-section {
    background: var(--pt-card-bg);
    border-radius: 12px;
    margin-bottom: 25px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

/* 설정 개별 항목 */
.st-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    border-bottom: 1px solid var(--pt-border);
}
.st-row:last-child { border-bottom: none; }

.st-label { font-size: 16px; font-weight: 500; }
.st-desc { display: block; font-size: 12px; color: var(--pt-sub-text); margin-top: 4px; }

/* 입력창 스타일 (이름 입력칸) - 강력하게 수정됨 */
.st-input {
    background-color: transparent !important; /* 배경 투명 */
    background: transparent !important;       /* 한번 더 투명 확인 */
    border: none !important;                  /* 테두리 없음 */
    box-shadow: none !important;              /* 그림자/광채 제거 */
    text-align: right;
    color: var(--pt-accent) !important;
    font-size: 16px;
    font-family: inherit;
    width: 60%;
    outline: none !important;
}

/* ⭐ 클릭했을 때(Focus) 하얘지는 현상 완벽 차단 */
.st-section .st-input:focus {
    background-color: transparent !important;
    background: transparent !important;
    box-shadow: none !important;
    color: var(--pt-accent) !important;
    outline: none !important;
}

/* 플레이스홀더(안내문구) 색상 */
.st-input::placeholder {
    color: var(--pt-sub-text);
    opacity: 1; /* 일부 브라우저 투명도 이슈 방지 */
}



/* 스위치 (토글 버튼) */
.st-switch {
    position: relative;
    width: 50px; height: 30px;
    appearance: none;
    background: #e9e9ea;
    border-radius: 20px;
    cursor: pointer;
    transition: 0.3s;
}
/* 다크모드에서 스위치 배경 끄기 */
#st-phone-container.dark-mode .st-switch { background: #39393d; }
.st-switch:checked { background: #34c759; } /* 켜지면 초록색 */
.st-switch::after {
    content: '';
    position: absolute;
    top: 2px; left: 2px;
    width: 26px; height: 26px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transition: 0.3s;
}
.st-switch:checked::after { transform: translateX(20px); }

/* 배경화면 프리셋 버튼 */
.st-bg-list { display: flex; gap: 10px; margin-top: 10px; }
.st-bg-preview {
    width: 50px; height: 80px;
    border-radius: 8px;
    border: 2px solid transparent;
    cursor: pointer;
    background-size: cover;
    background-position: center;
}
.st-bg-preview.selected { border-color: var(--pt-accent); transform: scale(1.05); }

/* 애니메이션 */
@keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

/* =========================================
   긴급 수정: 스위치 버튼 잘 보이게 하기
   ========================================= */

/* 1. 꺼져있을 때 (기본) - 진한 회색으로 변경해서 흰 배경에서도 잘 보이게 */
.st-switch {
    background-color: #d1d1d6 !important; /* 아이폰 기본 비활성 색 */
    border: 1px solid #c7c7cc !important; /* 테두리도 줘서 더 잘보이게 */
}

/* 2. 다크모드일 때 배경 - 어두운 회색 */
#st-phone-container.dark-mode .st-switch {
    background-color: #3a3a3c !important;
    border: 1px solid #555 !important;
}

/* 3. 켜졌을 때 (ON) - 쨍한 초록색 */
.st-switch:checked {
    background-color: #34c759 !important;
    border: none !important;
}

/* === 앱 아이콘 알림 배지 === */
.st-app-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ff3b30;
    color: white;
    font-size: 11px;
    font-weight: 600;
    min-width: 18px;
    height: 18px;
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 5px;
    box-sizing: border-box;
}
/* 숨겨진 폰 로그는 채팅창에서 보이지 않게 처리 (중요) */
.mes[is_phone_log="true"], .st-phone-hidden-log { display: none !important; }

/* =========================================
   모바일 대응 (전체화면)
   ========================================= */
@media screen and (max-width: 768px) {
    #st-phone-container {
        /* 모바일에서 전체화면 */
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: -150% !important;
        width: 100% !important;
        height: 100% !important;
        max-height: 100% !important;
        border-radius: 0 !important;
        z-index: 99999 !important;
        box-shadow: none !important;
        transition: bottom 0.3s ease-out;
    }

    #st-phone-container.active {
        bottom: 0 !important;
    }

    #st-phone-container::before,
    #st-phone-container::after {
        display: none !important; /* 사이드 버튼 숨김 */
    }

    .st-phone-screen {
        border-radius: 0 !important;
    }

    .st-phone-notch {
        /* 노치 영역 확대 (실제 폰 느낌) */
        width: 120px;
        height: 32px;
        top: 8px;
    }

    /* 홈 바 영역 확대 */
    .st-phone-home-area {
        height: 34px !important;
        bottom: 5px !important;
    }

    .st-phone-home-bar {
        width: 140px !important;
        height: 5px !important;
    }
}

/* =========================================
   폰 토글 버튼 (실리태번 UI용)
   ========================================= */
#st-phone-toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    padding: 5px 10px;
    font-size: 20px;
    transition: opacity 0.2s;
}

#st-phone-toggle-btn:hover {
    opacity: 0.8;
}

/* 옵션 메뉴에 추가되는 항목 스타일 */
#option_toggle_phone {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
}

/* =========================================
   알림 토스트 스타일 (폰 외부용)
   ========================================= */
.st-phone-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 320px;
    background: rgba(30, 30, 30, 0.95);
    border-radius: 16px;
    padding: 12px 15px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    z-index: 99999;
    cursor: pointer;
    animation: slideInRight 0.3s ease-out;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.1);
    font-family: -apple-system, sans-serif;
}
@keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
.st-phone-notification:hover {
    background: rgba(50, 50, 50, 0.95);
}
.st-notif-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px;
}
.st-notif-app-icon {
    font-size: 14px;
}
.st-notif-app-name {
    font-size: 12px;
    color: #aaa;
    flex: 1;
}
.st-notif-time {
    font-size: 11px;
    color: #888;
}
.st-notif-content {
    display: flex;
    align-items: center;
    gap: 10px;
    overflow: hidden;
}
.st-notif-avatar {
    width: 40px; height: 40px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
}
.st-notif-text {
    flex: 1;
    min-width: 0;
    overflow: hidden;
}
.st-notif-sender {
    font-size: 14px;
    font-weight: 600;
    color: #fff;
    margin-bottom: 2px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.st-notif-preview {
    font-size: 13px;
    color: #ccc;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
}
/* =========================================================
   📱 모바일 전용 모드 (강력한 고정 버전)
   ========================================================= */
@media screen and (max-width: 768px) {

    /* 1. 폰 컨테이너: 화면 꽉 채우기 & 강제 고정 */
    #st-phone-container {
        /* 무조건 화면 전체 덮기 */
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100vw !important;  /* 화면 가로 100% */
        height: 100vh !important; /* 화면 세로 100% */

        /* 디자인 초기화 */
        max-width: none !important;
        max-height: none !important;
        border-radius: 0 !important;
        border: none !important;
        box-shadow: none !important;
        padding: 0 !important;

        /* 평소엔 화면 아래로 "슬라이드" 해서 숨겨둠 (좌표 이동 방식) */
        bottom: 0 !important; /* 위치 자체는 잡되 */
        transform: translateY(110%) !important; /* 화면 밑으로 110% 밀어버림 */
        transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1) !important;

        /* 제일 위에 뜨도록 z-index 최대치 */
        z-index: 2147483647 !important;
    }

    /* 2. 활성화 상태: 제자리로 슬라이드 업 */
    #st-phone-container.active {
        /* 밀어뒀던 걸 원위치(0)로 가져옴 */
        transform: translateY(0%) !important;
        bottom: 0 !important;
    }

    /* 3. 물리 버튼 장식 제거 */
    #st-phone-container::before,
    #st-phone-container::after {
        display: none !important;
    }

    /* 4. 스크린 내부 꽉 채우기 */
    .st-phone-screen {
        width: 100% !important;
        height: 100% !important;
        border-radius: 0 !important;
        background-color: var(--pt-bg-color, #f5f5f7); /* 배경색 강제 지정 */
    }

    /* 5. 노치 디자인 수정 */
    .st-phone-notch {
        top: 0 !important;
        width: 120px !important;
        height: 24px !important;
        border-radius: 0 0 12px 12px !important;
    }

    /* 6. 알림창 위치 수정 */
    .st-phone-notification {
        top: 10px !important;
        right: 20px !important;
        left: 20px !important; /* 좌우 여백 */
        width: auto !important;
        max-width: none !important;
    }

    /* 7. 홈 바 위치 조정 (하단 터치 영역 확보) */
    .st-phone-home-area {
        bottom: 5px !important;
        padding-bottom: env(safe-area-inset-bottom, 20px) !important;
    }
}
/* [수정됨] SVG 아이콘 스타일 (크기 확대 & 강제 중앙 정렬) */

/* 1. 아이콘 컨테이너를 강제로 정리 */
.st-app-icon {
    display: flex !important;          /* 내부 내용물 정렬 모드 켜기 */
    justify-content: center !important; /* 가로 중앙 정렬 */
    align-items: center !important;    /* 세로 중앙 정렬 */
    padding: 0 !important;             /* 기존에 있던 패딩(여백) 강제 제거 */
}

/* 2. SVG 그림 크기 키우기 */
.st-app-icon svg {
    width: 42px;    /* 기존 32px -> 42px (30% 커짐) */
    height: 42px;   /* 동일하게 키움 */

    fill: white;    /* 색상은 흰색 유지 */
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); /* 그림자도 살짝 진하게 */

    /* 위치 미세 조정 필요 시 사용 (지금은 중앙이라 0) */
    transform: translate(0, 0);
}
